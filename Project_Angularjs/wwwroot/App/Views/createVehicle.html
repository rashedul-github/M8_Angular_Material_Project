<div ng-controller="createVehicleCtrl">
    <div ng-if="carInsertMsg" class="alert alert-info alert-dismissible fade show" role="alert">
        <strong>Success!</strong> {{carInsertMsg}}.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <uib-tabset active="activeTab">
        <uib-tab index="0" heading="Vehicle" disable="true">
            <div class="card">
                <div class="card-header"> <h2 class="card-title">Add Vehicle with Services</h2></div>
                <div class="card-body">
                    <div class="card-text">
                        <form name="frmVehicle" ng-submit="vehicleDone()">

                            <div class="form-group row">
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">Make By</label>
                                <div class="col-3">
                                    <input name="makeBy"
                                           ng-model="currentVehicle.MakeBy"
                                           class="form-control form-control-sm"
                                           required />
                                    <div ng-messages="frmVehicle.makeBy.$error"
                                         ng-show="frmVehicle.makeBy.$invalid && !frmVehicle.makeBy.$pristine">
                                        <div class="text-danger" ng-message="required">
                                            Make by is requred.
                                        </div>
                                    </div>
                                </div>
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">Color</label>
                                <div class="col-3">
                                    <select name="color"
                                            class="form-control form-control-sm"
                                            ng-model="currentVehicle.Color">
                                        <option value="">-Not Defined-</option>
                                        <option value="Red">Red</option>
                                        <option value="Black">Black</option>
                                        <option value="White">White</option>
                                        <option value="Green">Green</option>
                                        <option value="Yellow">Yellow</option>
                                        <option value="Blue">Blue</option>
                                        <option value="Brown">Brown</option>
                                        <option value="Orange">Orange</option>
                                        <option value="Pink">Pink</option>
                                        <option value="Purple">Purple</option>
                                        <option value="Grey">Grey</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">Mileage</label>
                                <div class="col-3">
                                    <input name="mileage"
                                           ng-model="currentVehicle.Mileage"
                                           class="form-control form-control-sm"
                                           type="number"
                                           required />
                                    <div ng-messages="frmVehicle.mileage.$error"
                                         ng-show="frmVehicle.mileage.$invalid && !frmVehicle.mileage.$pristine">
                                        <div class="text-danger" ng-message="required">
                                            Mileage is requred.
                                        </div>
                                    </div>
                                </div>
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">Condition</label>
                                <div class="col-3">
                                    <select name="condition"
                                            class="form-control form-control-sm"
                                            ng-model="currentVehicle.Condition">
                                        <option value="">-Not Defined-</option>
                                        <option value="Excellent">Excellent</option>
                                        <option value="Very good">Very good</option>
                                        <option value="Good">Good</option>
                                        <option value="Fair">Fair</option>
                                        <option value="Clean">Clean</option>
                                        <option value="Average">Average</option>
                                        <option value="Rough">Rough</option>
                                        <option value="Damaged">Damaged</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">Make Date</label>
                                <div class="col-3">
                                    <div class="input-group">
                                        <input name="makeDate"
                                               ng-model="currentVehicle.MakeDate"
                                               class="form-control form-control-sm"
                                               required
                                               uib-datepicker-popup="yyyy-MM-dd"
                                               is-open="popup1.opened"
                                               close-text="Close" />
                                        <span class="input-group-btn">
                                            <button type="button"
                                                    class="btn btn-secondary btn-sm"
                                                    ng-click="open1()">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </div>
                                    <div ng-messages="frmVehicle.mileage.$error"
                                         ng-show="frmVehicle.makeDate.$invalid && !frmVehicle.makeDate.$pristine">
                                        <div class="text-danger" ng-message="required">
                                            Make date is requred.
                                        </div>
                                    </div>
                                </div>
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">VIN Number</label>
                                <div class="col-3">
                                    <input name="VINNumber"
                                           ng-model="currentVehicle.VINNumber"
                                           class="form-control form-control-sm"
                                           required />
                                    <div ng-messages="frmVehicle.VINNumber.$error"
                                         ng-show="frmVehicle.VINNumber.$invalid && !frmVehicle.VINNumber.$pristine">
                                        <div class="text-danger" ng-message="required">
                                            VIN number is requred.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">Note</label>
                                <div class="col-3">
                                    <textarea name="note"
                                              ng-model="currentVehicle.Note"
                                              class="form-control form-control-sm"></textarea>
                                </div>
                                <label for="" class="col-form-label col-form-label-sm col-2 text-right">Is Hold?</label>
                                <div class="col-3">
                                    <div class="input-group mt-2">
                                        <input type="checkbox" name="isHold"
                                               ng-model="currentCar.IsHold" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row mt-5">
                                <div class="col-6">
                                    <a ng-href="#!/vehicle"><i class="fa fa-reply"></i> Back to car list</a>
                                </div>
                                <div class="col-6">
                                    <div class="d-flex justify-content-end mr-2">
                                        <button type="submit"
                                                class="btn btn-success btn-sm"
                                                ng-disabled="frmVehicle.$invalid">
                                            Next <i class="fa fa-forward" aria-hidden="true"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="card-footer"></div>
            </div>
        </uib-tab>
        <uib-tab index="1" heading="Service Record" disable="true">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Service Reciords</h2>
                </div>
                <div class="card-body">
                    <div class="card-text">

                        <form name="frmService"
                              ng-submit="serviceDone(frmService)"
                              novalidate>
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Service By</th>
                                        <th>Service Charge</th>
                                        <th>Condition Descr.</th>
                                        <th>Is Delivered?</th>
                                        <th style="width:90px"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in ServiceRecord">
                                        <td>{{item.ServiceBy}}</td>
                                        <td>{{item.ServiceCharge | currency:'৳ '}}</td>
                                        <td>{{item.ConditionDescr}}</td>
                                        <td>{{item.IsDelivered? 'Yes': 'No'}}</td>
                                        <td class="text-center">
                                            <button type="button"
                                                    class="btn btn-danger btn-sm"
                                                    ng-click="serDel($index)">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td>
                                            <input name="serviceBy"
                                                   class="form-control form-control-sm"
                                                   ng-model="currentService.ServiceBy"
                                                   required />
                                            <div ng-messages="frmService.serviceBy.$error"
                                                 ng-show="frmService.serviceBy.$invalid && !frmService.serviceBy.$pristine">
                                                <div class="text-danger" ng-message="required">
                                                    Service by Name is requred.
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <input name="serviceCharge"
                                                   type="number"
                                                   class="form-control form-control-sm"
                                                   ng-model="currentService.ServiceCharge"
                                                   required />
                                            <div ng-messages="frmService.serviceCharge.$error"
                                                 ng-show="frmService.serviceCharge.$invalid && !frmService.serviceCharge.$pristine">
                                                <div class="text-danger" ng-message="required">
                                                    Service charge is requred.
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <textarea name="conditionDescr"
                                                      rows="2"
                                                      class="form-control form-control-sm"
                                                      ng-model="currentService.ConditionDescr"></textarea>
                                        </td>
                                        <td>
                                            <input type="checkbox" name="isDelivered"
                                                   ng-model="currentService.IsDelivered" />
                                        </td>
                                        <td class="text-center">
                                            <button type="submit"
                                                    class="btn btn-primary btn-sm"
                                                    ng-disabled="frmService.$invalid">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                        </form>
                        <div class="d-flex">
                            <button type="button"
                                    class="btn btn-secondary btn-sm"
                                    ng-click="serPre()">
                                <i class="fa fa-backward" aria-hidden="true"> Previous</i>
                            </button>
                            <span style="flex: auto">&nbsp;</span>
                            <button ng-disabled="ServiceRecord.length == 0"
                                    type="button"
                                    class="btn btn-primary btn-sm"
                                    ng-click="saveAll([frmVehicle, frmService])">
                                <i class="fa fa-floppy-o" aria-hidden="true"> Save & Finished</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </uib-tab>
    </uib-tabset>
</div>